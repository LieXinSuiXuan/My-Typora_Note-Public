# 2021年12月论述



## 第一套论述题


### 论述题 1

1.写出桌面指定文件里面截图故障的名称(3分)

图一： nova-scheduler api 错误 弹性云服务器故障

图二： neutron-server错误 弹性云服务器网络错误 

图三： cinder-scheduler api错误 弹性云服务器存储故障 

图四： VPC错误代码0209



2.分析造成截图错误可能有哪些原因(3分)

图一：

1. ​	nova-computer没有充足的计算资源 或者计算节点故障 时间不同步 所属的AZ不正确 导致云服务器发放失败
2. ​	所选的规格不符合云主机发放的标准
3. ​	云硬盘或者是网络资源不足 这样也会导致发放失败  
4. ​	云主机所需要的资源超出了VDC的配额 配额不足的时候也会导致发放失败  
5. ​	nova各个组件服务异常 进程卡死等 也会出现发放失败  
6. ​	主机标签和规格标签不对应  

以上这些原因都可能会导致nova-scheduler api的错误

 

图二：neutron-server错误表示网络资源失败

原有有以下几点：

1. ​	交换机和路由器故障
2. ​	网络配置错误 导致网络不通  
3. ​	neutron各个组件异常  
4. ​	交换机上行链路故障  
5. ​	在CPS中配置了错误的网络或者网关  

 

图三：cinder-schedule api 错误表示弹性云服务器存储故障

原因为：

1. ​	存储没有对接成功 存储设备链路故障 存储池故障 存储的业务平面和管理平面故障 或者是配置错误  
2. ​	存储空间不足  
3. ​	云硬盘容量超出VDC配额
4. ​	所属的AZ错误  
5. ​	cinder组件故障  

 

图四： VPC报错0209代码是因为该VPC下有存在的子网 VPC无法删除

 

3.写出你的排查思路(4分)

图一：

信息采集：查看任务中心的错误提示 查看系统告警 按照告警的步骤处理 查看FusionSphere的日志 搜索日志的关键错误 根据日志的提示处理  

故障判断：根据收集到的报错信息 首先排除是否是硬件故障 其次判断是否是组件故障 在判断完组件的基础上 可以精确定位到某个组件上 

故障解决：

1. ​	查看ManagerOne界面的告警信息 根据告警查找产品手册中关于该报错ID的解决信息  
2. ​	进入控制节点和计算节点 再重新发放云主机 复现错误 使用tail -f实时查看日志报错信息  

\#tail -f /var/log/FusionSphere/computer/nova-api/nova-api_error.log 

\#tail -f /var/log/FusionSphere/computer/nova-api/nova-scheduler_error.log

 \#tail -f /var/log/FusionSphere/computer/nova-api/nova-computer_error.log

根据日志中的报错信息 定位到具体的某一个组件 比如定位到计算 存储 或者网络组件 定位结束之后可以精确解决问题 

1. ​	如果是存储故障 则通过serverOM选择云硬盘 查看存储容量是否充足 如果存储容量不充足 则可以及时扩容 如果存储容量显示为0 则说明存储没有对接成功  
2. ​	通过CPS查看对接的情况 所诉AZ可用分区是否和发放的云主机的AZ一致 如果不一致 则需要调整为一致  同步各个节点的时间 保持一致 选择的规格必须大于或者等于镜像的规则 再iBMC中查看主机状态是否正常  
3. ​	在ManagerOne中申请云硬盘 单独申请查看是否有问题 用来判断存储是否有问题 如果有问题 则需要查看cinder的日志来分析 另外查看对接的存储上是否有告警硬盘  是否有存储池故障 如果有存储池的故障则需要更换一个存储池 如果有告警的硬盘 则需要更换一个硬盘  
4. ​	source set_env之后 运行nova service-list 查看服务的状态 如果某个组件异常可以通过cps平面用命令来重新启动对应的nova服务  
5. ​	主机的标签和规格的标签需要严格对应 需要进入serviceOM中检查  

 

 

图二：

解决方案：

1. ​	检查交换机中的vlan设置是否一样 检查路由表是否正常 测试网络是否能够正常通信 用ping命令检查各个网络平面是否可以正常访问  
2. ​	进入控制节点和计算节点 重现问题 使用tail查看日志中的报错  

\#tail -f /var/log/FusionSphere/computer/netron-server/neutron-server_erroes.log 

根据日志中的报错排除故障

1. ​	在控制节点或者网络节点 source set_env环境变量之后 执行openstack-service status 检查neutron组件运行是否正常  
2. ​	在CPS中检查虚拟交换机上的上行链路使用的哪一张网卡 检查对应的网卡是否正常 链路是否正常 所在物理交换机接口是否可以正常放行VLAN 网卡绑定模式是否正确  
3. ​	在CPS中查看external_OM和external_api等网络平面是否设置了正确的vlan vlan池是否正确  

 

 

图三：

故障解决思路：

1. ​	可以通过serviceOM中选择云硬盘 查看存储容量是否充足 如果存储容量不足 则可以及时扩容 如果剩余存储容量为0  则说明存储对接失败 需要重新对接存储  
2. ​	通过CPS界面查看对接情况 对接信息是否正确 ip地址和密码是否正确  如果是IP-SAN 则检查存储网络配置是否正确 检查链路是否正常 如果是FC-SAN 则检查光纤交换机的zone的配置是否正确 检查光纤链路和存储接口卡误码值是否在阈值范围内
3. ​	在serviceOM中查看所属的AZ是否和发放云主机的AZ一致 如果不一致 则需要调整为一致  
4. ​	在ManagerOne中单独申请一块云硬盘 查看云硬盘是否出现故障 用来判断存储是否故障 或者使用命令行在底层创建存储 查看是否成功 如果失败 则需要查看日志信息  

cinder日志分析：

\#tail -f /var/log/FusionSphere/computer/cinder-scheduler/cinder_volume.error.log

\#tail -f /var/log/FusionSphere/computer/cinder-scheduler/cinder_scheduler.error.log

使用tail查看日志 并且复现错误过滤出错误的日志

1. ​	查看对接的存储存储池是否故障 如果存储池故障 则需要重新更换存储池 如果是存储上存在告警的磁盘 则需要重新更换磁盘  
2. ​	如果出现了配额不足 则需要及时添加配额   
3. ​	在控制节点切换了环境变量之后 运行cinder service-list查看各个组件的运行情况 如果组件异常 则需要使用命令重启组件 重启的过程中可以查看日志来看是否存在报错  

 

图四：

故障解决思路：

1. ​	查看该VPC下子网被哪个组件使用 如果是被云主机使用则需要先删除云主机再删除子网 最后删除VPC  
2. ​	点击VPC选择子网 查看该子网下是否存在未释放的弹性负载均衡或者是数据库等 如果子网下存在未删除的数据库或者是弹性负载均衡 也可能会导致子网无法删除 应该先删除该子网下的弹性负载均衡或者是数据库 然后再删除子网 最后删除VPC



### 论述题2

某企业有一套VMware vsphere平台，需要将一台windows虚拟机迁移到华为虚拟化平台。

1. Rainbow迁移场景,和影响因素?

迁移场景：

​			P2V：物理到虚拟 将业务从物理机平台迁移到虚拟机平台 

​			V2V：虚拟到虚拟 讲业务在虚拟机平台之间相互迁移 即将虚拟机平台的业务迁移到虚拟机平台

​			UPV：华为云平台之间的迁移，也就是把不同版本的两个Fusion Sphere之间的数据或者操作系统进行迁移

​	

影响因素：

1. 源端和目的端磁盘的读取速率  
2. 操作系统的类型 	
3. 数据的迁移量   
4. 源端主机的负载量  
5. 网络速率  
6. 源端和目标端的cpu 内存性能  
7. 第三方迁移工具的速率  



2.Rainbow迁移的方式有哪些,区别是什么?

迁移方式有：块级迁移、文件级迁移

块级迁移： 适合迁移大量小文件

​			源端一般是Windows类型的系统 容错率较高 

​			迁移的最小单位按LUN来计算

​			磁盘使用率高 

​			可以保证迁移之后源目端文件结构保持一致

​			适合源端虚拟机和目标虚拟机结构相似或者结构一致的场景

文件级迁移： 迁移的最小单位是虚拟机 

​			 源端通常是Linux操作系统

​			 适合源端虚拟机和目标虚拟机结构不一致的场景

​			 可以指定文件进行迁移

​			 对于源端可以进行扩容或者缩容

3.以windows块级迁移为例,描述迁移过程和原理?

迁移流程：

1. 安装rainbow服务器（关闭防火墙，杀毒软件）
2. 对接云平台FC
3. 配置共享目录（生成winPE代理镜像）  
4. 添加源端虚拟机的配置信息（填写ip、管理员用户密码）
5. 在目标平台上创建目标虚拟机（配置临时IP，添加rainbow字段描述，规格推荐大于源虚拟机规格）
6. 创建迁移任务，填写基础信息和ip地址 保证源端和目标端虚拟机、rainbow、FC平台之间的网络可以互通  
7.  通过挂载代理镜像，配置ip，Windows分区格式化  Windows块数据迁移，Windows配置修改，卸载代理镜像完成迁移。任务完成之后 可以通过多次同步来保证数据的一致性 。

迁移原理：

1. 通过获取rainbow服务器生成的共享目录的winpe代理镜像，用于挂载给虚拟机作为临时启动源
2. 目的虚拟机配置临时ip保证目的虚拟机于源端虚拟机，rainbow，FC平台三者之间能够网络之间互相通信。  
3. Rainbow下发迁移命令给目标虚拟机，进行磁盘分区格式化，然后将需要迁移的数据写入磁盘中
4. Rainbow下发迁移命令给源端虚拟机，通过在虚拟机中安装代理以vss卷镜像和fastcopy技术将数据迁移至目标虚拟机  
5. 数据迁移完成之后，目标虚拟机重新从硬盘启动，并且打快照
6. 通过fastcopy技术可以多次同步源端变化的数据 ，将增量的数据同步到目标虚拟机  
7. 停止业务进行最终同步 业务进行验证 保证迁移的虚拟机可以正常运行 最后迁移成功



## 第二套论述题

### 论述题1：

1. 私有云机器已经上架了,作为项自负责人该考虑接下来的哪些阶段?

分为五个阶段：

1. 安装部署  
2. 配置实施
3. 管理维护  
4. 数据迁移  
5. 故障管理

私有云设备上架 意味着项目前期的项目立项 市场调研 用户调研 网络部署 等已经结束，接下来的应该是私有云工程师进行云平台的搭建、云平台内部测试、业务测试迁移、

业务正式迁移、并写好相应的操作运维手册并移交给客户

1. 接下来具体实施步骤    ?  

  安装部署以及配置实施阶段  

1. ​	准备FCD的安装和部署，准备好各类软件  
2. ​	根据网络规划中的External_OM，External_api,Internal_base三个网络平面，分别配置三个网络平面和子网IP，在交换机配置External_OM以及External_api相应的vlan并放行，使External_OM平面和External_api两个平面之间的网络互通，而Inernal_base平面为默认vlan，仅内部组件能够互相通信。完成虚拟化平台安装前禁止接入其他网络，防止网络之间互相冲突  
3. ​	配置底层文件，登录FusionClouddeploy账号，切换root用户 输入cd/etc/FusionCloudDeploy/fcdscripty进入目录，再输入vim fcd_config.ini进入进项配置（Deploy_form=1为物理部署,Depoly_form=2为虚拟部署；vlan om配置的是External_OM的vlanID）
4. ​	编辑完成之后，登录FCD管理界面，选择工程管理-新建工程，安装首个region global和AZ。
5. ​	下载LLD表，填写规划填写完成后上传模板
6. ​	上传各类软件包 确认信息后 开始安装   
7. ​	开始安装

  操作维护阶段  

安装完成了之后，进行小规模内部组件测试，如镜像上传 创建实例 创建规格 创建弹性云服务器 云硬盘等 确定创建没有问题之后再进行业务迁移

  业务迁移阶段  

内部系统测试完成之后，将客户测试用的主机进行迁移测试。迁移测试完成之后，可以根据业务重要程度分批次进行业务迁移 直到所有业务迁移完成

  故障处理阶段  

根据在整个测试过程中所有发现的问题，编写故障处理手册以及应急预案，归纳所有产品文档提交客户 并确定培训时间 参与最终验收

  论述题    2  

  1.    学校的电子阅览室    ,    推荐使用什么桌面，什么桌面组，为什么    ?  

学校的电子阅览室推荐使用链接克隆桌面 使用动态池桌面组 原因如下： 

1. 学校电子阅览室不需要个性化数据和应用 所以在类型上不选择完整复制 而选择了连接克隆 使用链接克隆还可以批量对所有的桌面进行更新和维护 便于后期管理  
2. 动态池的桌面优点在于支持关机自动还原 不会对后来使用的同学造成影响 并且学生使用电脑是随机分配的 并不需要每个学生使用固定的桌面
3. 综上所诉 链接克隆桌面 动态池桌面组为最优选择  



  2.    虚拟机登录的交互流程    ?  

虚拟机登录流程可以分为有VAG和无VAG场景 因为学生在校内才能使用电子阅览室 所以推测为无VAG场景

1. 登录WI：客户端访问VLB，VLB根据负载均衡选择合适的WI，并返回WI界面给客户端。用户在WI界面输入账号密码进行登录，此时WI向AD验证账号密码的合法性 AD返回结果 WI将结果发送至客户端显示  
2. 获取虚拟机列表：客户端发送获取虚拟机列表请求至WI，WI向AD进行二次验证，查询用户组的信息，并将查询结果丢给HDC，HCD向DB发送请求 查询虚拟机IP以及状态之后将结果返回给WI，WI返回给客户端显示  
3. 预连接：用户选择一台虚拟机登录的时候 请求会发送给WI，WI发送获取虚拟机信息将请求给HDC，HDC向DB查询IP以及状态之后 向HAD发送预连接请求，预连接轻功之后HDC向license服务器查license是否充足 如果充足则生成一个login ticket并返回给客户端（无VAG场景不生成address ticket）  
4. 链接：客户端发送login ticket给HDA，HDA将login ticket发送至HDC验证 验证成功之后返回用户的域账户和密码至HDA，HDA向AD查询账号密码的合法性 验证成功则返回给客户端并登录虚拟机 并向HDC同步信息 扣除license                                          



  3.    若干台虚拟机卡在登录界面    ,    推断是什么问题    ,    如何排错    ?  

1. 网络异常。检查WI到HDC，HDC到DB之间的网络状态，客户端到HAD之间是否故存在故障 可通过自主维护控制台登录虚拟机 运行vdesk工具 检查通信状态 如发现故障可以进行修复
2. 组件异常。在IRA服务器中查看各个组件的状态 例如 ITA HDC DB等 如果出现异常 可以尝试重启HDC 重启之后尝试是否可以正常登录
3. 操作失误。首先查看是否存在失误的操作 例如虚拟机关机 端口组被修改 虚拟机是否被删除 虚拟机是否正在迁移等 还可以VNC登录之后查看ip是否被修改 DHCP服务器中的ip地址是否超分配 其实检查虚拟机模板是否正常 可能这些虚拟机对接的链接克隆虚拟机模板存在问题
4. 硬件故障。如果该阅览室存在100台机器 其中有10台出现问题 属于小面积故障 假设这十台虚拟机都在同一个CNA中那么可能是因为CNA的故障导致10台虚拟机存在问题 。如果是90台出现故障则属于是大面积出现故障 需要排查物理硬件的故障 例如CNA集群故障 物理服务器故障 网络设备故障 存储故障等  
5. 验证license是否充足 若license已经全部被分配完 则虚拟机也无法登录  



  第三套论述题  

  论述题    1  

  FA    桌面云运维分析，某政府部门使用的是华为    FusionAccess    桌面云作为办公系统，某员工从终端登录，发现某台完整复制虚拟机不见了，从     FusionCompute    等    VNC    可以正常登录改完整复制虚拟机。  

  1.    作为桌面云驻场工程师的你，请说一下可能造成该场景的原因有哪些    ?    解决方案是    ?(4    分    )  

由该场景可判断故障出现在获取虚拟机列表阶段，原因及解决方案如下：

1. ​	查看WI到HDC,HDC到DB网络状态是否正常，可通过ping命令确认网络连通性。
2. ​	HDC组件故障，DB组件故障。可在业务非繁忙时重启HDC组件或ITA服务器。
3. ​	分配给该用户的虚拟机被收回，尝试重新发放。









  2.    该单位有    4000    个云桌面，其中    100    台桌面云突然无法登录，请分析原因    ?  

100台突然无法登录属于大范围故障

从虚拟化平台角度出发：

1. ​	云桌面直接对接的CNA是否故障，如果故障则可尝试重启CNA主机，无法重启可等待HA机制，等虚拟机迁移完成后再次开机尝试。
2. ​	检查上行链路是否断开，服务器网口或交换机网口是否故障，如果是光纤接口需要查看光模块状态。
3. ​	存储状态和SAN交换机状态是否异常。通常情况下会有备份存储和SAN网络，可等待数据源进行切换后再次尝试登录。
4. ​	查询这100台云桌面所接入的交换机是否故障，可重启交换机或接入备份交换机，然后再次尝试登录。

从桌面云服务器角度出发：

1. ​	ITA组件是否异常，如发生故障可尝试重启ITA服务器或单独重启各个组件。
2. ​	查看DHCP服务器状态是否正常，以及DHCP地址池是否充足。如不充足可启用新的DHCP地址池。
3. ​	查看AD服务器，是否误删用户或用户组。如出现误删，重新添加相同用户和用户信息即可。
4. ​	查看NTP服务器，VNC登录故障虚拟机，查看时间是否同步。





 

  论述题    2  

  华为云业务迁移方案，传统企业的运营系统包括办公系统，开发测试系统，业务系统。由于公司规模和运维环境的发展，传统模式无法满足企业需求，决定将运营系统全部上云。  

1. ​	  这    3    个系统迁移上云的顺序是怎样的    ?    业务迁移影响的原则有哪些    ?(3    分    )  

1.迁移顺序为：首先是迁移测试系统，其次是办公系统，最后是业务系统。

2.业务影响原则有：按照迁移风险由低到高，按照对业务影响由小到大，安装业务中断时间由长到短，按照业务复杂度由易到难



1. ​	  迁移项目分为哪些阶段    ?    （    2    分）  

1.业务与用户调研阶段 2.规划设计阶段 3.测试和正式迁移阶段 4.验收阶段



1.   根据阶段划分    ,    阐述可能出现的情况有哪些    ?    （    5    分）  

1. ​	调研阶段：对用户现有业务进行系统调研。但可能出现对现有业务架构，网络架构，设备类型等认知不全的情况，此时需要客户协调各厂商对该单位设备有足够了解的人集中商讨；现有环境中存在部分设备或操作系统无法完美的进行迁移，此时需要和客户及时沟通，商量解决方案。
2. ​	规划设计阶段：将搜集到的调研信息表格化处理，划分业务等级，标明注意事项，进行风险评估，做好应急预案，提交用户审核。现有技术无法完全满足客户需求，需及时与客户沟通，不可知情不报。应急预案和技术方案往往是经验之得，但不一定能满足实际现状，需在测试过程中不断完善更新，同时做好最坏的打算，准备充足的回退方案。
3. ​	测试和正式迁移阶段可能出现：首先进行业务测试迁移，测试时尽可能模拟所有业务类型下的操作系统，对于特殊设备需协调厂商配合，对于确定无法完美迁移的业务需与客户达成一致，做好物理设备和云平台同时工作的准备。在方案确认无误后开始业务正式迁移，正式迁移时严格按照迁移顺序进行，做好多次迁移或是回退的准备。及时发现问题，并更新入册。
4. ​	验收阶段可能出现：待所有业务迁移完成后对过程和结果进行统计对比，对已迁移完成的任务进行最终确认，查漏补缺，优化系统，固化所有表格文档并提交客户。实在无法完成的预期需与客户协调并达成一致。组织培训，完成验收。





  第四套论述题  

  论述题    2  

  某金融客户，需要搭建一套灾备系统，要求发生灾难时数据    0    丢失，能抵抗大面积灾难（小于等于    3000km    ）  

  1.    容灾和备份的区别。  

容灾保护的是业务 而备份保护的是数据 容灾经常被用于解决客户业务连续性的问题上

备份是容灾的基础 容灾被作为业务最后的保障 而备份被作为数据最后的保障

1. 备份保护的是数据 容灾不仅保护了数据 也保护了业务的连续性  
2. 备份往往都是在同一个数据中心里面进行的 而容灾经常是在不同的数据中心中进行  
3. 备份的数据有一定的延迟性 而容灾具有实时性
4. 备份的保护等级是小时级别 而容灾的保护等级是分钟级 或者秒级   
5. 备份一般只能用于恢复备份过的数据 而没有备份的数据则不能恢复 而容灾能够做到业务连续性 使得一些恶劣情况下的业务可以持续运行  
6. 一般的备份是通过软件来进行备份 而容灾是通过复制或者镜像软件来实现 通过备份处理过的数据格式不一样  使用的时候需要恢复才能够使用 而容灾的数据被作为镜像 可以随时挂载给主机使用  

  2.    根据用户的需求，你推荐使用华为的哪个容灾方案，原因是什么？  

根据距离由近到远分为本地容灾 同城容灾 异地容灾 

本地容灾： 本地高可用方案 相对应而言成本较低 容灾级别也低 数据的保护安全性低 

同城容灾： 同城双活解决方案 可以很好解决机房异常故障的问题 可以快速恢复业务 但是无法解决城市灾难的问题 

异地容灾： 两地三中心解决方案 本地高可用+同城容灾+异地灾备的两地三中心解决方案 该方案可以在任意两个数据中心出现问题的时候都可以保证业务的连续性



根据客户需求需要3000km以内的灾备 则需要采用异地容灾 采用两地三中心的容灾方案 灾备级别最高 数据的保护性最强 客户要求灾难的时候数据零丢失 那就要采用 两个城市 三个地理位置 数据三存放 同城双活+远距离数据中心 保证了数据在发生区域性灾难的时候 灾备系统能够做出 相应 具有更高的灾备能力 保证了业务的连续性 实现更高的RPO和RTO 

  3.    根据你推荐的方案，有哪些组网方式，它们分别有哪些区别。  

1. 级联组网架构包括：同步+异步级联方案 异步+异步级联方案  
2. 并联组网架构包括：同步+异步并联方案 异步+异步并联方案  
3. ​	双活组网架构包括：hyperMetro+异步级联方案

其中级联组网架构中：

同步+异步级联方案是指：客户端先向数据中心A写入数据 然后再向数据中心B写入数据 当数据中心A和数据中心B都写入完成后完成一次数据写入 由B将数据异步复制到数据中心C

异步+异步级联方案是指：客户端将数据写入数据中心A 由数据中心A将数据异步复制给数据中心B 再由数据中心B异步复制给数据中心C

其中并联组网架构中：

同步+异步并联方案是指：客户端先向数据中心A写入数据 然后再向数据中心B写入数据 当数据中心A和数据中心B都写入完成后完成一次数据写入 然后再由数据中心A和数据中心B中的任意一个将数据异步复制给数据中心C

异步+异步并联方案是指： 客户端将数据写入数据中心A 由数据中心A将数据异步复制给数据中心B 再由数据中心A和数据中心B中的任意一个将数据异步复制给数据中心C

其中双活组网架构中：

HyperMetro+异步级联方案是指：客户端同时向A数据中心和B数据中心写入数据 其中任意一方将数据同步复制给数据中心C 其中数据中心A和数据中心B之间做负载均衡 保证在任意一方故障时 业务能够秒级切换 说明AB数据中心之间做同城双活



级联组网优势：对生产中心的性能影响小 劣势：当发生区域性灾难的时候 如果同城灾备中心完全受损 RPO较大

并联组网优势：当发生区域灾难的时候 能有有效避免级联组网的缺点 劣势：对生产中心性能要求高

双活+远程复制组网优势：弥补双活数据中心解决方案无法应对区域性灾难的不足 劣势：对客户端写入的数据中心A和需要同步或者异步的数据中心B性能要求高

 







  第五套论述题  

  论述题    1  

  规划一个    Type3    的私有云  

1. ​	  了解客户需求    (3    分    )  
    1. ​		了解现网业务情况，核对客户需要上云的业务（同时识别业务是否能上云或者迁移到云上，进行进一步沟通）
    2. ​		依据客户现有业务数据量，确定需要多少计算资源以及存储资源，是否需要高性能存储
    3. ​		与客户沟通，确认需要使用的云服务，除IaaS服务外是否需要PaaS服务以及数据库服务
    4. ​		确认客户是否需要云安全，或灾备系统
    5. ​		核对客户业务是否需要双栈能力





1. ​	  规划哪些网络平面，这些网络平面的作用    (3    分    )  
    1. ​		External APl: FusionSphere 	OpenStack 	的外部API管理平面，与外部网络相连,通过该网络可以从外部网络接入内部虚拟机执行操作。同时也用来给管理员和用户等提供一个登录界面的网络平面。
    2. ​		External OM: FusionSphere 	OpenStack 	内部OM管理平面，与外部网络相连,通过该网络可以从内部网络接入外部网络。外部管理平面.承载了运维接入,对接VmwareVcenter, 	ELB管理面,NGFW,对接AC控制,对接FusionStorage,V3,lPSan 	等第三方存储管理面,级联被级联层,对接外部 	NTP/FTP/SYSIOG服务器。同时所有节点的默认路由走external_ 	om平面。
    3. ​		Internal_Base:内部管理平面。承载了pxe流量,组件配置管理,openstack组件南向通信,openstack组件代理流量,运维管理,网络配置管理,升级配置管理,告警通道,信息采集,公共服务等。
    4. ​		Storagel_data0:使用KVM资源时的内部存储平面。可用于接入FusionStorage及其他存储设备网络。FusionStorage 	只需要data0平面;IPSAN需要data0 	与data1平面
    5. ​		Public_Service:云服务后端VM，云服务DB的VM以及运维组件VM使用的网络
    6. ​		DMz Servic:云服务前端VM使用的网络 	云服务前端VM包括LVS，Nginx和云服务的Console。
    7. ​		DMz_Tenant:面向租户的网络,单独规划的平面专用于与租户VM互通。APIGW.DNS_NTP等服务与虚机互通时需要此网络的一个地址,此网络与租户网段tenant_network网络三层互通。
    8. ​		Heart_beat: 云服务心跳平面，用于云服务内部互通使用。
    9. ​		BMC 平面:硬件设备的管理地址段,主机BMC网口使用平面。
    10. ​		业务平面:面向租户或者用户，提供了三种不同类型的网路,直连网络,路由网络和内部网络。



1. ​	  安装部署流程，组件安装顺序    (4    分    )  
    1. ​		准备FCD的配置和安装，准备好各类软件
    2. ​		根据网络规划中的External_om，External_api，Internal_base三个网络平面，分别配置3个网络平面和子网IP。在交换机配置External_OM及External_API相应VLAN并放行，使两平面网络互通，而Internal_base的默认vlan，仅供内部组件通信。在完成虚拟化平台安装前禁止接入其他网络，避免网络冲突。
    3. ​		配置底层文件，登录Fusionclouddeploy账号，切换root用户，输入cd/etc/FusionCloudDeplot/fcdscript进入目录，再输入vim 	fcd_config.ini进行配置（Deploy_form：1为物理部署，2为虚拟部署；Vlan 	om：External_om的VLAN 	ID；VLANX_pxe：Internal_base的Vlan 	ID）
    4. ​		编辑完成后，登录FCD管理页面，选择工程管理-新建工程，安装首个region，global和AZ。
    5. ​		下载LLD表，按照规划填写完成后上传模板。
    6. ​		上传各类软件安装包，确认信息后，开始安装。
    7. ​		安装完成。



安装组件顺序:检查告警、open stack、service OM、安装公共虚拟机、NTP、DMK、ManageOne、Gauss DB、Ningx、ESC UI、haproxy、LVS、SMNSimple、DNS、SDR、CCS、组合API、VPC、Task Center、EVS、FusionCare等





  论述题    2  

  电商做城域容灾  

  1.RPO    和    RTO    是什么    (2    分    )  

RPO： 最多可能丢失数据的时长 标志系统能够最大容忍多少数据的丢失 系统容忍丢失数据越少 RPO越小 系统容忍丢失数越大 RPO越大



RTO： 从灾难发生开始一直到恢复数据所需要的时长 标志系统能够忍耐服务停止的最大时间 系统服务紧迫性越高 RTO值最小 

  2.    从哪些层面规划    (3    分    )  

对于电商城做容灾 可以使用双活数据中心做容灾的解决方案 确保业务在系统阵列中发生故障实现双活 甚至在发生故障的时候业务无感知 秒级切换业务 实现业务零中断 数据零丢失 双活数据中心容灾成层面主要有：存储层 计算层 应用层 网络层 传输层 安全层 



  3.    这些层面用到了哪些技术    (5    分    )  

存储层： 通过hyperMetro实现存储层的双活 hypermetro实现机制是基于两套存储阵列实现双活 两端阵列的双活LUN数据实时同步 且双端能够同时处理应用服务器的IO读写请求 面向应用服务器提供无差异的AA站点并行访问能力 当任何一台磁盘阵列故障的时候 业务自动无缝切换到对端存储访问 业务访问步中断 

计算层： 通过Fusion Sphere Vmware等虚拟化技术 提供虚拟机HA特性 故障时用于恢复 

应用层： 通过应用集群和数据库集群实现双活

网络层：通过网络设备的双活网关以及全局负载均衡器 服务器负载均衡器 实现双活 就近接入高可用网络切换

传输层： 通过设备冗余以及办卡冗余构建可靠的双活传输网络

安全层： 通过防火墙和安全策略规划和设计保证访问安全 通过传输层的加密特性 保证跨数据中心数据传输安全