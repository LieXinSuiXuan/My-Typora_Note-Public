[toc]



# 查找和处理文件



## Locate

基于数据库的查询 特点是快

-i 忽略大小写

-n x 显示x行

更新数据库：update



## Find



实时查询

精确查询 

需要目录有rx的权限



### 语法结构

```shell
find [dir1..] [criteria..] [action..] 
      文件名     规则         目录 
find -name passwd /etc
```





### 匹配规则：

1.  根据文件所在的目录的层级查找

*   -maxdepth x 最大查找深度 

*   -mindepth x 最小查找深度 



2.  根据文件的文件名和链接数来查找

*   -name 精确匹配文件名 如果进行模糊查询用通配符
*   -iname 忽略大小写
*   -inum 通过查询文件的唯一标识符来查找文件
*   -links 根据链接数来查询



3.  根据文件的拥有人和拥有组来查询

*   -user  根据文件的拥有人 
*   -group 根据文件的拥有组
*   -uid  根据文件的拥有人的uid来查找
*   -gid  根据文件的拥有组的gid来查找
*   -nouser 查找没有user的文件
*   -nogroup 查找没有group的文件



4.  组合查询

*   -a 逻辑与 并且
*   -o 逻辑或 或者
*   -not 逻辑非 除了。。。以外



5.  根据文件的类型查找

*   -type 

    *   f：普通文件
    *   d:目录

    *   b:块设备
    *   l:链接文件

    *   c:字符文件



6.  根据文件的大小：

*   -size +10M (>10M)的文件

*   -size -10M (0-9M)的文件

*   -size 10M (9M-10M]的文件



7.  根据文件的权限来查询 （0表示不关注那一位）

*   -perm 755 匹配具体的某个权限 精确匹配 

*   -perm /220 查找拥有人或拥有组有w的权限 

*   -perm -220 查找拥有人和拥有组都有w的权限



8.  根据文件的时间戳来查询

*   -atime +10 十天没有访问过的文件 单位默认天

*   -atime -10 十天内访问过的文件

*   -mtime

*   -ctime

*   -amin

*   -mmin

*   -cmin



9.  在查找到的文件上继续使用命令

*   -ls 查找到的文件的详细信息列出

*   -delete 删除查找到的文件

*   -ok chmod u+x {} \; 语法格式  交互式

*   -exec chmod u+x {} \;

*   {}表示查找到的文件 

*   在任何地方不支持管道的，可以用xargs让命令通过管道
    *   find |xargs chmod u+x 