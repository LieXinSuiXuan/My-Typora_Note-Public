nova  云主机配置

安全组（secgroup）
nova   secgroup-create   secgroup_name     'comment'
nova   secgroup-delete   secgroup_name
nova   secgroup-list			//查看安全组
nova   secgroup-list-rules  secgroup_name	//查看安全组规则信息

修改安全组，允许ping和ssh
nova  secgroup-add-rule  secgroup_name  icmp  -1  -1   0.0.0.0/0
nova  secgroup-add-rule  secgroup_name  tcp   22  22   0.0.0.0/0

虚拟机模板
nova   flavor-create  flavor_name  6  2048  20   2
nova   flavor-delete  flavor_name
nova   flavor-list
nova   flavor-show  flavor_name

启动云主机
nova   boot   --flavor   flavor_name   --image  image_name   --security-groups  secgroup_name   host_name
nova   list			//查看目前的实例清单
nova   show   host_name	//查看实例的具体信息
nova   delete   host_name	//删除实例


neutron网络配置管理

创建外网：
tenantID=`openstack project list | grep service | awk '{print $2}'`		//获取Service项目的ID号，在后面的命令中调用
neutron  net-create  --tenant-id  $tenantID  ext-net  --shared  --router:external  True  --provider:network_type gre
创建外网子网：
neutron  subnet-create  --allocation-pool start=192.168.200.200,end=192.168.200.220  --gateway 192.168.200.2  --dns-nameserver 8.8.8.8  --name  ext-subnet  ext-net 192.168.200.0/24

*********

创建内网：
openstack network create int-net
创建内网子网：
neutron  subnet-create   --allocation-pool  start=10.10.10.100,end=10.10.10.200   --gateway 10.10.10.1  --dns-nameserver  8.8.8.8   --name   int-subnet1   int-net  10.10.10.0/24
neutron  subnet-create   --allocation-pool  start=10.10.11.100,end=10.10.11.200   --gateway 10.10.11.1  --dns-nameserver  8.8.8.8   --name   int-subnet2   int-net  10.10.11.0/24

********

创建路由：
neutron  router-create  myrouter
neutron  router-gateway-set   myrouter   ext-net
neutron  router-interface-add   myrouter   int-subnet1		//子网用名称或者ID均可
neutron  router-interface-add   myrouter   int-subnet2

启动一台带网路配置的云主机

nova  boot  --flavor  myflavor   --image centos7.2   --security-groups mysecgrp   --nic net-id=8ebe82b7-bbe6-4b69-b690-833c3bea3559  myhost1
(net-id需要使用neutron  subnet-show  subnet-name获取network-id)

绑定浮动IP
neutron  floatingip-create  ext-network //查看获取到的浮动IP地址
nova  floating-ip-associate  myhost1  192.168.200.202


**************************************************

neutron  net-create
neutron  net-list
neutron  net-show   net-name

neutron  subnet-create
neutron  subnet-list
neutron  subnet-show   subnet-name



https://docs.openstack.org/zh_CN/user-guide/cli-create-and-manage-networks.html